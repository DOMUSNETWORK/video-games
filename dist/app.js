"use strict";var myApp=angular.module("myApp",["ngRoute","ngAnimate","myApp.themeSwitcher","myApp.videoGames"]).config(["$routeProvider",function($routeProvider){$routeProvider.otherwise({redirectTo:"/video-games"})}]),themeSwitcher=angular.module("myApp.themeSwitcher",[]),videoGames=angular.module("myApp.videoGames",["ngRoute","ngAnimate"]);themeSwitcher.controller("themeController",["$scope",function(){var self=this;self.css="css/themes/app-theme-0",self.themes=[{id:"theme00",css:"css/themes/app-theme-0",name:"Default"},{id:"theme01",css:"css/themes/app-theme-1",name:"Theme 1"},{id:"theme02",css:"css/themes/app-theme-2",name:"Theme 2"}]}]),videoGames.directive("gameCard",[function(){return{templateUrl:"video-games/game-card/game-card.html",restrict:"A",replace:!0,scope:{cardData:"="}}}]),videoGames.controller("GameDetailsController",["$routeParams","GamesFetcher",function($routeParams,GamesFetcher){var self=this,gamesArr=GamesFetcher.get(),curGame=GamesFetcher.retrieve($routeParams.id);self.game=curGame.game,self.prevGame=curGame.index>0?gamesArr[curGame.index-1].id:gamesArr[gamesArr.length-1].id,self.nextGame=curGame.index<gamesArr.length-1?gamesArr[curGame.index+1].id:gamesArr[0].id}]),videoGames.factory("GamesFetcher",["$http",function($http){var games=[];return{get:function(){return 0===games.length&&$http.get("video-games.json").then(function(response){games=response.data},function(errResponse){console.error("Error while fetching games",errResponse)}),games},retrieve:function(gameId){if(angular.isDefined(gameId)){for(var i=0,len=games.length;len>i;i++)if(angular.equals(games[i].id,gameId))return{index:i,game:games[i]};return null}console.error("Error while retrieving game, check arguments for retrieve()")}}}]),videoGames.controller("GamesListController",["GamesFetcher",function(GamesFetcher){var self=this;self.games=GamesFetcher.get(),self.gamesOrder="price",self.direction="reverse"}]),videoGames.filter("gamePrice",[function(){return function(price){return 0===price?"Free game":price>0?"$"+price:void 0}}]),videoGames.directive("searchBar",[function(){return{templateUrl:"video-games/search-bar/search-bar.html",restrict:"A",replace:!0,scope:{barQuery:"=filter",barOrder:"=order",barDirection:"=direction"}}}]),videoGames.config(["$routeProvider",function($routeProvider){$routeProvider.when("/video-games",{templateUrl:"video-games/games-list/games-list.html",resolve:{async:["GamesFetcher",function(GamesFetcher){return GamesFetcher.get()}]},controller:"GamesListController as listCtrl"}).when("/video-games/:id",{templateUrl:"video-games/game-details/game-details.html",resolve:{async:["GamesFetcher",function(GamesFetcher){return GamesFetcher.get()}]},controller:"GameDetailsController  as detailsCtrl"})}]);